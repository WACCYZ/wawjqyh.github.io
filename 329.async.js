(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[329],{Q4in:function(s,n){s.exports='<h1 id="webpack">webpack</h1>\n<h2 id="1-\u5b89\u88c5\u548c\u547d\u4ee4\u884c">1 \u5b89\u88c5\u548c\u547d\u4ee4\u884c</h2>\n<p><strong>1\u3001webpack\u652f\u63013\u79cd\u6a21\u5757\u5316\u65b9\u5f0f</strong></p>\n<p><code>AMD</code>  <code>CommonJS</code>  <code>ES6\u6a21\u5757\u5316</code></p>\n<p><strong>2\u3001\u5b89\u88c5</strong></p>\n<pre><code>npm install webpack --<span class="hljs-built_in">save</span>-<span class="hljs-built_in">dev</span></code></pre><p><strong>3\u3001\u6253\u5305</strong></p>\n<pre><code class="language-javascript">webpack hello<span class="hljs-selector-class">.js</span> hello_bundle<span class="hljs-selector-class">.js</span>    <span class="hljs-comment">//\u9700\u8981\u6253\u5305\u7684\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u548c\u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\u79f0</span></code></pre>\n<p><strong>4\u3001\u5f15\u7528css\u6587\u4ef6</strong></p>\n<p><code>\u5904\u7406css\u6587\u4ef6\u9700\u8981\u4f9d\u8d56loader</code>\uff0c\u9700\u8981\u5b89\u88c5css-loader \u548c style-loader</p>\n<p>css-loader\u7528\u6765\u6253\u5305css\uff0cstyle-leader\u7528\u6765\u628acss\u6dfb\u52a0\u5230\u9875\u9762</p>\n<p><code>\u4ee5\u5185\u8054\u6837\u5f0f\u7684\u65b9\u5f0f\uff0c\u4f1a\u5728js\u4e4b\u540e\u6267\u884c</code></p>\n<p>\u4f7f\u7528\u65b9\u6cd5</p>\n<pre><code class="language-javascript">require(<span class="hljs-string">"style-loader!css-loader!./style.css"</span>)<span class="hljs-comment">;</span></code></pre>\n<p>\u6216\u8005\u4f7f\u7528\u547d\u4ee4\u884c\uff1a</p>\n<pre><code class="language-javascript">webpack hello<span class="hljs-selector-class">.js</span> hello_bundle<span class="hljs-selector-class">.js</span> --module-bind <span class="hljs-string">"css=style-loader!css-loader"</span></code></pre>\n<p><strong>5\u3001\u81ea\u52a8\u6253\u5305</strong></p>\n<pre><code class="language-javascript">webpack hello<span class="hljs-selector-class">.js</span> hello_bundle<span class="hljs-selector-class">.js</span> --watch</code></pre>\n<p><strong>6\u3001\u67e5\u770b\u6253\u5305\u8fc7\u7a0b</strong></p>\n<p>\u6253\u5305\u7684\u65f6\u5019\u4f1a\u663e\u793a\u767e\u5206\u6bd4</p>\n<pre><code class="language-javascript">webpack hello<span class="hljs-selector-class">.js</span> hello_bundle<span class="hljs-selector-class">.js</span> --progress</code></pre>\n<p><strong>7\u3001\u67e5\u770b\u6240\u6709\u5f15\u7528\u7684\u6a21\u5757</strong></p>\n<pre><code class="language-javascript">webpack hello<span class="hljs-selector-class">.js</span> hello_bundle<span class="hljs-selector-class">.js</span> --progress --<span class="hljs-attribute">display</span>-modules</code></pre>\n<h2 id="2-webpack\u57fa\u672c\u914d\u7f6e">2 webpack\u57fa\u672c\u914d\u7f6e</h2>\n<h3 id="21-\u5efa\u7acb\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6">2.1 \u5efa\u7acb\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6</h3>\n<p><strong>1\u3001\u57fa\u672c\u914d\u7f6e</strong></p>\n<pre><code class="language-javascript">module.exports = {\n<span class="hljs-symbol">    entry:</span> <span class="hljs-string">"./src/scripts/main.js"</span>,         <span class="hljs-comment">//\u8868\u793a\u6253\u5305\u7684\u5165\u53e3\u662f\u4ece\u54ea\u4e2a\u6587\u4ef6\u5f00\u59cb</span>\n<span class="hljs-symbol">    output:</span> {                               <span class="hljs-comment">//\u6253\u540e\u7684\u6587\u4ef6\u7684\u914d\u7f6e</span>\n<span class="hljs-symbol">        path:</span> <span class="hljs-string">"./dist/js"</span>,                  <span class="hljs-comment">//\u6587\u4ef6\u8def\u5f84</span>\n<span class="hljs-symbol">        filename:</span> <span class="hljs-string">"bundle.js"</span>,\n<span class="hljs-symbol">        publicPath:</span> <span class="hljs-string">"http://www.test.com/"</span>   <span class="hljs-comment">//\u76f8\u5f53\u4e8e\u7ebf\u4e0a\u7684\u5730\u5740\uff0c\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0</span>\n    }\n};</code></pre>\n<p><strong>2\u3001\u5728node.js\u4e2d\u4f7f\u7528webpack</strong></p>\n<pre><code class="language-javascript"><span class="hljs-selector-tag">webpack</span>({},callback);   <span class="hljs-comment">//\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u914d\u7f6e</span></code></pre>\n<h3 id="22-webpack\u914d\u7f6e\u7684entry\u548coutput">2.2 webpack\u914d\u7f6e\u7684entry\u548coutput</h3>\n<p><strong>1\u3001entry\u67093\u4e2d\u8f93\u5165\u65b9\u5f0f</strong></p>\n<ol>\n<li><p>\u5b57\u7b26\u4e32\uff0c\u5373\u5355\u4e00\u7684\u5165\u53e3\u6587\u4ef6</p>\n</li>\n<li><p>\u6570\u7ec4\uff0c\u628a\u4e0d\u76f8\u4f9d\u8d56\u7684\u4e24\u4e2a\u6587\u4ef6\u6253\u5305\u5728\u4e00\u8d77</p>\n<pre><code class="language-javascript"><span class="hljs-keyword">entry</span>: [<span class="hljs-string">"./entry1.js"</span>, <span class="hljs-string">"./entry2.js"</span>]</code></pre>\n</li>\n<li><p>\u5bf9\u8c61\uff0c\u53ef\u4ee5\u7528\u6765\u6253\u5305\u6210\u591a\u4e2a\u6587\u4ef6\uff0c\u6709\u591a\u4e2a\u9875\u9762\u7684\u65f6\u5019\u4f1a\u7528\u5230</p>\n<pre><code class="language-javascript">module.exports = {\n<span class="hljs-symbol"> entry:</span> {\n<span class="hljs-symbol">     page1:</span> [<span class="hljs-string">"./entry1.js"</span>, <span class="hljs-string">"./entry2.js"</span>],\n<span class="hljs-symbol">     page2:</span> <span class="hljs-string">"./entry3"</span>\n },\n<span class="hljs-symbol"> output:</span> {\n<span class="hljs-symbol">     path:</span> <span class="hljs-string">"./dist/js"</span>,\n<span class="hljs-symbol">     filename:</span> <span class="hljs-string">"bundle.js"</span>\n }\n};</code></pre>\n</li>\n</ol>\n<p><strong>\u6ce8\u610f\uff1a</strong>\n(1) page1\uff0cpage2\u662f\u4e00\u4e2achunk\uff0c\u7c7b\u4f3c\u4e8e\u6253\u5305\u540e\u7684\u4e00\u4e2a\u6a21\u5757<br>\n(2) \u8fd9\u6837\u914d\u7f6e\u53ea\u4f1a\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u56e0\u4e3aoutput\u53ea\u6307\u5b9a\u4e86\u4e00\u4e2a\u6587\u4ef6\u3002output\u7684\u8def\u5f84\u4e0d\u8981\u6307\u5b9a\u4e00\u4e2a\u7edd\u5bf9\u8def\u5f84</p>\n<p><strong>2\u3001filename\u7684\u4e09\u4e2a\u53c2\u6570</strong></p>\n<ol>\n<li><code>[name]</code> \u5373chank name\uff0cpage1\uff0cpage2</li>\n<li><code>[hash]</code> \u6bcf\u6b21\u6253\u5305\u90fd\u4f1a\u6709\u4e00\u4e2a\u54c8\u5e0c\u503c\uff0c\u76f8\u5f53\u4e8e\u7248\u672c\u53f7</li>\n<li><code>[chankhash]</code> chank\u7684\u54c8\u5e0c\u503c\uff0c\u53ea\u6709\u5728\u6587\u4ef6\u6709\u6539\u52a8\u7684\u65f6\u5019\u624d\u4f1a\u6539\u53d8</li>\n</ol>\n<p><strong>3\u3001\u6b63\u786e\u7684\u914d\u7f6e</strong></p>\n<pre><code class="language-javascript">module.exports = {\n<span class="hljs-symbol">    entry:</span> {\n<span class="hljs-symbol">        page1:</span> [<span class="hljs-string">"./entry1.js"</span>, <span class="hljs-string">"./entry2.js"</span>],\n<span class="hljs-symbol">        page2:</span> <span class="hljs-string">"./entry3"</span>\n    },\n<span class="hljs-symbol">    output:</span> {\n<span class="hljs-symbol">        path:</span> __dirname + <span class="hljs-string">"/dist/js"</span>,\n<span class="hljs-symbol">        filename:</span> <span class="hljs-string">"[name]-[chankhash].js"</span>\n    }\n};</code></pre>\n<h2 id="3-\u751f\u6210\u9879\u76ee\u4e2d\u7684html\u9875\u9762\u6587\u4ef6">3 \u751f\u6210\u9879\u76ee\u4e2d\u7684html\u9875\u9762\u6587\u4ef6</h2>\n<h3 id="31-\u57fa\u672c\u4f7f\u7528">3.1 \u57fa\u672c\u4f7f\u7528</h3>\n<p>\u7528webpack\u63d2\u4ef6\u81ea\u7528\u5f15\u7528\u6253\u5305\u597d\u7684\u6587\u4ef6</p>\n<p><strong>1\u3001\u5b89\u88c5</strong></p>\n<pre><code class="language-javascript"><span class="hljs-attribute">html-webpack-plugin</span></code></pre>\n<p><strong>2\u3001\u4f7f\u7528</strong></p>\n<pre><code class="language-javascript"><span class="hljs-symbol">plugins:</span> [\n    new htmlWebpackPlugin({\n<span class="hljs-symbol">        filename:</span> <span class="hljs-string">"index-[hash].html"</span>,      <span class="hljs-comment">//\u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\u5b57</span>\n<span class="hljs-symbol">        template:</span> <span class="hljs-string">"index.html"</span>,             <span class="hljs-comment">//\u6e90\u6587\u4ef6\u7684\u540d\u5b57</span>\n<span class="hljs-symbol">        inject:</span> <span class="hljs-string">"head"</span>                      <span class="hljs-comment">//\u9875\u9762\u5f15\u7528\u6587\u4ef6\u7684\u4f4d\u7f6e</span>\n    })\n]</code></pre>\n<p>\u53bb\u6389inject\u5219\u4e0d\u4f1a\u81ea\u52a8\u5f15\u7528js\u6587\u4ef6</p>\n<p><strong>3\u3001\u538b\u7f29\u4ee3\u7801</strong></p>\n<p>\u53c2\u7167\u6587\u6863</p>\n<p><strong>4\u3001\u6253\u5305\u591a\u4e2ahtml\u6587\u4ef6</strong></p>\n<p>\u5b9e\u4f8b\u5316\u591a\u4e2ahtml\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5206\u522b\u914d\u7f6e\u4e0d\u540c\u7684\u53c2\u6570</p>\n<h3 id="32-\u4f7f\u7528\u6a21\u677f\u6dfb\u52a0\u6570\u636e">3.2 \u4f7f\u7528\u6a21\u677f\u6dfb\u52a0\u6570\u636e</h3>\n<p>html-webpack-plugin\u652f\u6301ejs\u6a21\u677f\uff0c\u53ef\u4ee5\u5728\u9875\u9762\u6dfb\u52a0\u6570\u636e</p>\n<pre><code class="language-javascript"><span class="hljs-symbol">plugins:</span> [\n    new htmlWebpackPlugin({\n<span class="hljs-symbol">        filename:</span> <span class="hljs-string">"index.html"</span>,      <span class="hljs-comment">//\u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\u5b57</span>\n<span class="hljs-symbol">        template:</span> <span class="hljs-string">"index.html"</span>,      <span class="hljs-comment">//\u6e90\u6587\u4ef6\u7684\u540d\u5b57</span>\n<span class="hljs-symbol">        inject:</span> <span class="hljs-string">"head"</span>,              <span class="hljs-comment">//\u9875\u9762\u5f15\u7528\u6587\u4ef6\u7684\u4f4d\u7f6e</span>\n<span class="hljs-symbol">        title:</span> <span class="hljs-string">"web pack is good"</span>\n    })\n]\n\n<span class="hljs-params">&lt;title&gt;</span><span class="hljs-params">&lt;%= htmlWebpackPlugin.options.title %&gt;</span><span class="hljs-params">&lt;/title&gt;</span></code></pre>\n<p>htmlWebpackPlugin\u4e0b\u6709\u4e24\u4e2a\u5bf9\u8c61</p>\n<p><code>files</code>\uff1awebpack\u6253\u5305\u7684js\u6587\u4ef6\u7684\u63cf\u8ff0<br>\n<code>options</code>\uff1a\u63d2\u4ef6\u7684\u914d\u7f6e</p>\n<h3 id="33-\u4e0d\u540c\u7684\u9875\u9762\u5f15\u7528\u4e0d\u540c\u7684\u6587\u4ef6">3.3 \u4e0d\u540c\u7684\u9875\u9762\u5f15\u7528\u4e0d\u540c\u7684\u6587\u4ef6</h3>\n<p><strong>1\u3001chanks\u53c2\u6570\uff0c\u914d\u7f6e\u9700\u8981\u5f15\u5165\u7684js</strong></p>\n<pre><code class="language-javascript">new htmlWebpackPlugin({\n<span class="hljs-symbol">    filename:</span> <span class="hljs-string">"index.html"</span>,      <span class="hljs-comment">//\u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\u5b57</span>\n<span class="hljs-symbol">    template:</span> <span class="hljs-string">"index.html"</span>,      <span class="hljs-comment">//\u6e90\u6587\u4ef6\u7684\u540d\u5b57</span>\n<span class="hljs-symbol">    inject:</span> <span class="hljs-string">"head"</span>,              <span class="hljs-comment">//\u9875\u9762\u5f15\u7528\u6587\u4ef6\u7684\u4f4d\u7f6e</span>\n<span class="hljs-symbol">    title:</span> <span class="hljs-string">"web pack is good"</span>,\n<span class="hljs-symbol">    chunks:</span> [<span class="hljs-string">"a"</span>, <span class="hljs-string">"test"</span>]       <span class="hljs-comment">//\u9700\u8981\u5f15\u7528\u7684js\u6a21\u5757</span>\n})</code></pre>\n<p><strong>2\u3001excludeChanks</strong></p>\n<pre><code class="language-javascript"><span class="hljs-symbol">excludeChanks:</span> [<span class="hljs-string">"a"</span>, <span class="hljs-string">"test"</span>]</code></pre>\n<p>\u5f15\u5165\u9664\u4e86a\u548ctest\u4e4b\u5916\u7684\u6240\u6709chank</p>\n<h2 id="4-\u5904\u7406\u9879\u76ee\u4e2d\u7684\u8d44\u6e90\u6587\u4ef6">4 \u5904\u7406\u9879\u76ee\u4e2d\u7684\u8d44\u6e90\u6587\u4ef6</h2>\n<h3 id="41-\u4f7f\u7528loader\u7f16\u8bd1js">4.1 \u4f7f\u7528loader\u7f16\u8bd1js</h3>\n<p>\u53ef\u4ee5\u5c06es2016\u3001es2017\u7b49\u8bed\u6cd5\u8f6c\u6362\u6210\u4f4e\u7248\u672c\u7684\u8bed\u6cd5</p>\n<p><strong>1\u3001\u5b89\u88c5</strong></p>\n<pre><code class="language-javascript">npm <span class="hljs-keyword">install </span><span class="hljs-keyword">babel-loader </span><span class="hljs-keyword">babel-core </span>--save-dev</code></pre>\n<p><strong>2\u3001\u57fa\u672c\u914d\u7f6e</strong></p>\n<pre><code class="language-javascript"><span class="hljs-symbol">modules:</span> {\n<span class="hljs-symbol">    loaders:</span> [\n        {\n<span class="hljs-symbol">            test:</span> /\\.js$/,                  <span class="hljs-comment">//\u901a\u8fc7\u6b63\u5219\u5339\u914d\u9700\u8981\u7f16\u8bd1\u7684\u6587\u4ef6</span>\n<span class="hljs-symbol">            loader:</span> <span class="hljs-string">"babel"</span>,                <span class="hljs-comment">//loader\u7684\u540d\u79f0</span>\n<span class="hljs-symbol">            exclude:</span> <span class="hljs-string">"./node_modules/"</span>,     <span class="hljs-comment">//\u8fc7\u6ee4\u7684\u76ee\u5f55</span>\n<span class="hljs-symbol">            include:</span> <span class="hljs-string">"./src/"</span>,              <span class="hljs-comment">//\u9700\u8981\u7f16\u8bd1\u7684\u6587\u4ef6\u7684\u76ee\u5f55</span>\n<span class="hljs-symbol">            query:</span> {\n<span class="hljs-symbol">                prasets:</span> [<span class="hljs-string">"latest"</span>]         <span class="hljs-comment">//\u7f16\u8bd1js\u7684\u7248\u672ces6\u3001es7</span>\n            }\n        }\n    ]\n}</code></pre>\n<p>\u8be6\u7ec6\u914d\u7f6e\u89c1\u5b98\u7f51</p>\n<p><strong>3\u3001\u8fc7\u6ee4\u548c\u7f16\u8bd1\u6587\u4ef6\u7684\u76ee\u5f55</strong></p>\n<p>\u5efa\u8bae\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84</p>\n<pre><code class="language-javascript">exclude: path.<span class="hljs-built_in">resolve</span>(__dirname, <span class="hljs-string">"node_modules"</span>),    <span class="hljs-comment"> //\u8fc7\u6ee4\u7684\u76ee\u5f55</span>\n<span class="hljs-built_in">include</span>: path.<span class="hljs-built_in">resolve</span>(__dirname, <span class="hljs-string">"src"</span>),             <span class="hljs-comment"> //\u9700\u8981\u7f16\u8bd1\u7684\u6587\u4ef6\u7684\u76ee\u5f55</span></code></pre>\n<h3 id="42-\u7f16\u8bd1\u6837\u5f0f">4.2 \u7f16\u8bd1\u6837\u5f0f</h3>\n<p>postcss-loader</p>\n<p>\u5bf9css\u4f5c\u4e00\u4e9b\u5904\u7406\uff0c\u6bd4\u5982\u52a0\u4e0a\u5404\u4e2a\u5185\u6838\u7684\u524d\u7f00</p>\n<pre><code class="language-javascript">{\n    <span class="hljs-attribute">test</span>: /\\.css$/,\n    loader: <span class="hljs-string">"style-loader!css-loader!postcss-loader"</span>,   //\u4e24\u79cd\u65b9\u5f0f\uff0c\u53ef\u4ee5\u4f7f\u7528Loaders\n    loaders: [<span class="hljs-string">"style-loader"</span>, <span class="hljs-string">"css-loader"</span>, <span class="hljs-string">"postcss-loader"</span>]\n}</code></pre>\n<p>\u7f16\u8bd1less</p>\n<p>\u4f7f\u7528less-loader</p>\n<pre><code class="language-javascript">{\n    <span class="hljs-attribute">test</span>: /\\.less$/,\n    loader: <span class="hljs-string">"style!css!postcss!less"</span>    //\u53ef\u4ee5\u4f7f\u7528\u7b80\u5199\u7684\u65b9\u5f0f\uff0c\u7701\u7565loader\n}</code></pre>\n'}}]);